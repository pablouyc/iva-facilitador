@page
@model IvaFacilitador.Pages.IVA.SeleccionModel
@{
    ViewData["Title"] = "Cálculo de IVA";
    Layout = "/Pages/Shared/_Layout.cshtml";
    var months = System.Globalization.CultureInfo.GetCultureInfo("es-ES").DateTimeFormat.MonthNames.Where(m => !string.IsNullOrEmpty(m)).ToArray();
}
<div class="topbar mb-3 py-2">
  <div class="container d-flex align-items-center gap-2">
    <a class="tablink active" href="/IVA/Seleccion">Cálculo</a>
    <a class="tablink" href="/Empresas">Empresas</a>
  </div>
</div>
<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="card shadow-sm card-iva">
      <div class="card-body p-4">
        <h1 class="h4 mb-3">Selecciona empresa y período</h1>
        <p class="text-secondary">Elige la empresa de QuickBooks y el período (mes/año).</p>
        @if (TempData["Success"] is string ok) { <div class="alert alert-success">@ok</div> }
        <form method="post" class="row g-3">
          <div class="col-12">
            <label class="form-label label-required" for="SelectedRealmId">Empresa (QuickBooks)</label>
            <select asp-for="SelectedRealmId" class="form-select">
              <option value="">-- Selecciona --</option>
              @foreach(var c in Model.Companies){ <option value="@c.RealmId">@c.Name (@c.RealmId)</option> }
            </select>
            <span class="text-danger small" asp-validation-for="SelectedRealmId"></span>
          </div>
          <div class="col-md-6">
            <label class="form-label label-required" for="SelectedMonth">Mes</label>
            <select asp-for="SelectedMonth" class="form-select">
              @for (var i = 1; i <= 12; i++) {
                <option value="@i">@months[i-1]</option>
              }
            </select>
            <span class="text-danger small" asp-validation-for="SelectedMonth"></span>
          </div>
          <div class="col-md-6">
            <label class="form-label label-required" for="SelectedYear">Año</label>
            <input asp-for="SelectedYear" class="form-control" type="number" min="2015" max="@DateTime.Now.Year" />
            <span class="text-danger small" asp-validation-for="SelectedYear"></span>
          </div>
          <div class="col-12 d-flex gap-2">
            <button class="btn btn-acento" type="submit">Generar IVA</button>
            <a class="btn btn-outline-secondary" href="/Empresas">Empresas</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
