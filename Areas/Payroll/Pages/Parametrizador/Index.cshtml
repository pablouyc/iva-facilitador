@page "{id:int?}"
@model IvaFacilitador.Areas.Payroll.Pages.Parametrizador.IndexModel
@{
    ViewData["Title"] = "Parametrizador de nómina";
}

<h2 class="mb-4">Parametrizador de nómina</h2>

<form method="post">
    @Html.AntiForgeryToken()
    <input type="hidden" name="CompanyId" value="@Model.CompanyId" />

    <fieldset class="mb-4">
        <div class="row g-3">
            <div class="col-12">
                <label class="form-label">Empresa</label>
                <input class="form-control" value="@Model.CompanyName" readonly />
            </div>

            <div class="col-md-6">
                <label class="form-label">Cuenta de gasto predeterminada</label>
                <select asp-for="ExpenseAccountId" class="form-select">
                    <option value="">(sin seleccionar)</option>
                    @foreach (var a in Model.Accounts)
                    {
                        <option value="@a.Id">@a.Name</option>
                    }
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label">Ítem de salario (Service)</label>
                <select asp-for="WageItemId" class="form-select">
                    <option value="">(sin seleccionar)</option>
                    @foreach (var it in Model.Items)
                    {
                        <option value="@it.Id">@it.Name</option>
                    }
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label">REALMID (QBO)</label>
                <input class="form-control" value="@Model.RealmId" readonly />
            </div>
        </div>
    </fieldset>

    <div class="d-flex gap-2">
        <button class="btn btn-primary" formaction="?handler=Save">Guardar</button>

        @if (Model.HasTokens)
        {
            <button class="btn btn-outline-secondary" formaction="?handler=Sync">Sincronizar desde QBO</button>
        }
        else
        {
            <button class="btn btn-outline-primary" formaction="?handler=Connect">Conectar con QBO</button>
        }

        <a class="btn btn-light" href="/Payroll/Empresas">Volver</a>
    </div>
</form>

